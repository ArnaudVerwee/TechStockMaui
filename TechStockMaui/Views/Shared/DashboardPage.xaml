<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="TechStockMaui.Views.Shared.DashboardPage"
    BackgroundColor="#f8f9fa"
    Title="Dashboard">

    <Grid RowDefinitions="Auto,*">
        <!-- Barre du haut adaptée mobile -->
        <Frame Grid.Row="0" 
               BackgroundColor="White" 
               HasShadow="True"
               CornerRadius="0"
               Padding="0"
               Margin="0">

            <VerticalStackLayout>
                <!-- Header principal -->
                <HorizontalStackLayout 
                    Padding="15,10"
                    VerticalOptions="Center"
                    HorizontalOptions="FillAndExpand"
                    Spacing="10">

                    <!-- Logo / Titre compact pour mobile -->
                    <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                        <Label Text="📦" FontSize="{OnPlatform Android=20, Default=28}" VerticalOptions="Center" />
                        <Label x:Name="AppTitleLabel"
                               Text="TechStock"
                               FontSize="{OnPlatform Android=18, Default=24}"
                               FontAttributes="Bold"
                               TextColor="#2c3e50"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <!-- Espace qui pousse les contrôles à droite -->
                    <BoxView WidthRequest="0" HorizontalOptions="FillAndExpand" />

                    <!-- Sélecteur de langue compact -->
                    <Label x:Name="LanguageFlag" 
                           Text="FR" 
                           FontSize="{OnPlatform Android=12, Default=14}"
                           FontAttributes="Bold"
                           TextColor="#2c3e50"
                           BackgroundColor="#F5F5F5"
                           Padding="{OnPlatform Android='6,3', Default='8,4'}"
                           VerticalOptions="Center"
                           HorizontalOptions="Center">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnLanguageClicked"/>
                        </Label.GestureRecognizers>
                    </Label>
                </HorizontalStackLayout>

                <!-- Menu de navigation toujours visible mais adapté -->
                <ScrollView Orientation="Horizontal"
                            HorizontalOptions="FillAndExpand"
                            Padding="10,0,10,10">

                    <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                        <!-- Boutons de navigation compacts -->
                        <Frame BackgroundColor="#3498db" 
                               Padding="12,8" 
                               HasShadow="False"
                               CornerRadius="20">
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="🏠" FontSize="16" TextColor="White" />
                                <Label x:Name="HomeButtonLabel"
                                       Text="Accueil" 
                                       FontSize="12" 
                                       TextColor="White"
                                       IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>

                        <Frame BackgroundColor="Transparent" 
                               Padding="12,8" 
                               HasShadow="False"
                               CornerRadius="20"
                               BorderColor="#ddd">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnWarehouseClicked" />
                            </Frame.GestureRecognizers>
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="📦" FontSize="16" TextColor="#666" />
                                <Label x:Name="ProductsButtonLabel"
                                       Text="Produits" 
                                       FontSize="12" 
                                       TextColor="#666"
                                       IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>

                        <Frame BackgroundColor="Transparent" 
                               Padding="12,8" 
                               HasShadow="False"
                               CornerRadius="20"
                               BorderColor="#ddd">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnTruckClicked" />
                            </Frame.GestureRecognizers>
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="🚚" FontSize="16" TextColor="#666" />
                                <Label x:Name="SuppliersButtonLabel"
                                       Text="Fournisseurs" 
                                       FontSize="12" 
                                       TextColor="#666"
                                       IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>
                        <Frame BackgroundColor="Transparent" 
                                Padding="12,8" 
                                   HasShadow="False"
                                   CornerRadius="20"
                                   BorderColor="#ddd">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnLaptopClicked" />
                            </Frame.GestureRecognizers>
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="💻" FontSize="16" TextColor="#666" />
                                <Label x:Name="TypesButtonLabel"
                                       Text="Types" 
                                   FontSize="12" 
                                   TextColor="#666"
                                   IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>
                        <Frame BackgroundColor="Transparent" 
                               Padding="12,8" 
                               HasShadow="False"
                               CornerRadius="20"
                               BorderColor="#ddd">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnUsersClicked" />
                            </Frame.GestureRecognizers>
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="👥" FontSize="16" TextColor="#666" />
                                <Label x:Name="UsersButtonLabel"
                                       Text="Utilisateurs" 
                                       FontSize="12" 
                                       TextColor="#666"
                                       IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>

                        <Frame BackgroundColor="Transparent" 
                               Padding="12,8" 
                               HasShadow="False"
                               CornerRadius="20"
                               BorderColor="#ddd">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnLogoutClicked" />
                            </Frame.GestureRecognizers>
                            <HorizontalStackLayout Spacing="5">
                                <Label Text="🚪" FontSize="16" TextColor="#e74c3c" />
                                <Label x:Name="LogoutButtonLabel"
                                       Text="Sortir" 
                                       FontSize="12" 
                                       TextColor="#e74c3c"
                                       IsVisible="{OnPlatform Android=False, Default=True}" />
                            </HorizontalStackLayout>
                        </Frame>
                    </HorizontalStackLayout>
                </ScrollView>
            </VerticalStackLayout>
        </Frame>

        <!-- Contenu principal optimisé mobile -->
        <ScrollView Grid.Row="1" Padding="{OnPlatform Android='15,10', Default='20,10'}">
            <VerticalStackLayout Spacing="{OnPlatform Android=15, Default=20}">

                <!-- Message de bienvenue compact -->
                <Frame BackgroundColor="White" 
                       HasShadow="True" 
                       CornerRadius="12"
                       Padding="{OnPlatform Android=15, Default=20}">
                    <VerticalStackLayout Spacing="8">
                        <Label x:Name="WelcomeLabel"
                               Text="Bienvenue sur TechStock" 
                               FontSize="{OnPlatform Android=18, Default=22}" 
                               FontAttributes="Bold"
                               TextColor="#2c3e50"
                               HorizontalOptions="Center" />
                        <Label x:Name="WelcomeSubLabel"
                               Text="Gérez votre inventaire facilement" 
                               FontSize="{OnPlatform Android=12, Default=14}" 
                               TextColor="#7f8c8d"
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Cartes d'accès rapide adaptées mobile -->
                <Label x:Name="QuickAccessLabel"
                       Text="Accès rapide" 
                       FontSize="{OnPlatform Android=16, Default=18}" 
                       FontAttributes="Bold"
                       TextColor="#2c3e50"
                       Margin="0,10,0,5" />

                <!-- Grid adaptatif : 1 colonne sur mobile, 2 sur desktop -->
                <Grid RowDefinitions="Auto,Auto,Auto,Auto" 
                      ColumnDefinitions="{OnPlatform Android=*, Default='*,*'}" 
                      RowSpacing="12" 
                      ColumnSpacing="12">

                    <!-- Card Produits -->
                    <Frame Grid.Row="0" 
                           Grid.Column="0"
                           Grid.ColumnSpan="{OnPlatform Android=1, Default=1}"
                           BackgroundColor="White"
                           HasShadow="True"
                           CornerRadius="12"
                           Padding="{OnPlatform Android=15, Default=20}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnWarehouseClicked" />
                        </Frame.GestureRecognizers>
                        <HorizontalStackLayout Spacing="15" HorizontalOptions="Start">
                            <Label Text="📦" FontSize="32" VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                                <Label x:Name="ProductsCardLabel"
                                       Text="Produits" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="#3498db" />
                                <Label x:Name="ProductsCardSubLabel"
                                       Text="Gérer l'inventaire" 
                                       FontSize="12" 
                                       TextColor="#7f8c8d" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Frame>

                    <!-- Card Fournisseurs -->
                    <Frame Grid.Row="{OnPlatform Android=1, Default=0}" 
                           Grid.Column="{OnPlatform Android=0, Default=1}"
                           BackgroundColor="White"
                           HasShadow="True"
                           CornerRadius="12"
                           Padding="{OnPlatform Android=15, Default=20}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnTruckClicked" />
                        </Frame.GestureRecognizers>
                        <HorizontalStackLayout Spacing="15" HorizontalOptions="Start">
                            <Label Text="🚚" FontSize="32" VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                                <Label x:Name="SuppliersCardLabel"
                                       Text="Fournisseurs" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="#e74c3c" />
                                <Label x:Name="SuppliersCardSubLabel"
                                       Text="Gérer les contacts" 
                                       FontSize="12" 
                                       TextColor="#7f8c8d" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Frame>

                    <!-- Card Utilisateurs -->
                    <Frame Grid.Row="{OnPlatform Android=2, Default=1}" 
                           Grid.Column="0"
                           BackgroundColor="White"
                           HasShadow="True"
                           CornerRadius="12"
                           Padding="{OnPlatform Android=15, Default=20}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnUsersClicked" />
                        </Frame.GestureRecognizers>
                        <HorizontalStackLayout Spacing="15" HorizontalOptions="Start">
                            <Label Text="👥" FontSize="32" VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                                <Label x:Name="UsersCardLabel"
                                       Text="Utilisateurs" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="#2ecc71" />
                                <Label x:Name="UsersCardSubLabel"
                                       Text="Gérer les accès" 
                                       FontSize="12" 
                                       TextColor="#7f8c8d" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Frame>

                    <!-- Card Mes Produits -->
                    <Frame Grid.Row="{OnPlatform Android=3, Default=1}" 
                           Grid.Column="{OnPlatform Android=0, Default=1}"
                           BackgroundColor="White"
                           HasShadow="True"
                           CornerRadius="12"
                           Padding="{OnPlatform Android=15, Default=20}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnAssignedProductsClicked" />
                        </Frame.GestureRecognizers>
                        <HorizontalStackLayout Spacing="15" HorizontalOptions="Start">
                            <Label Text="📋" FontSize="32" VerticalOptions="Center" />
                            <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                                <Label x:Name="MyProductsCardLabel"
                                       Text="Mes Produits" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="#f39c12" />
                                <Label x:Name="MyProductsCardSubLabel"
                                       Text="Produits assignés" 
                                       FontSize="12" 
                                       TextColor="#7f8c8d" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Frame>
                </Grid>

                <!-- Statistiques rapides compactes -->
                <Label x:Name="OverviewLabel"
                       Text="Aperçu" 
                       FontSize="{OnPlatform Android=16, Default=18}" 
                       FontAttributes="Bold"
                       TextColor="#2c3e50"
                       Margin="0,15,0,5" />

                <Frame BackgroundColor="White" 
                       HasShadow="True" 
                       CornerRadius="12"
                       Padding="{OnPlatform Android=15, Default=20}">
                    <Grid RowDefinitions="Auto" 
                          ColumnDefinitions="*,*,*" 
                          ColumnSpacing="15">

                        <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
                            <Label Text="🔢" FontSize="{OnPlatform Android=20, Default=24}" HorizontalOptions="Center" />
                            <Label x:Name="TotalLabel"
                                   Text="Total" 
                                   FontSize="11" 
                                   TextColor="#7f8c8d"
                                   HorizontalOptions="Center" />
                            <Label x:Name="TotalProductsLabel"
                                   Text="0" 
                                   FontSize="{OnPlatform Android=18, Default=20}" 
                                   FontAttributes="Bold"
                                   TextColor="#3498db"
                                   HorizontalOptions="Center" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
                            <Label Text="✅" FontSize="{OnPlatform Android=20, Default=24}" HorizontalOptions="Center" />
                            <Label x:Name="AssignedLabel"
                                   Text="Assignés" 
                                   FontSize="11" 
                                   TextColor="#7f8c8d"
                                   HorizontalOptions="Center" />
                            <Label x:Name="AssignedProductsLabel"
                                   Text="0" 
                                   FontSize="{OnPlatform Android=18, Default=20}" 
                                   FontAttributes="Bold"
                                   TextColor="#2ecc71"
                                   HorizontalOptions="Center" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="2" HorizontalOptions="Center">
                            <Label Text="📋" FontSize="{OnPlatform Android=20, Default=24}" HorizontalOptions="Center" />
                            <Label x:Name="AvailableLabel"
                                   Text="Libres" 
                                   FontSize="11" 
                                   TextColor="#7f8c8d"
                                   HorizontalOptions="Center" />
                            <Label x:Name="FreeProductsLabel"
                                   Text="0" 
                                   FontSize="{OnPlatform Android=18, Default=20}" 
                                   FontAttributes="Bold"
                                   TextColor="#e74c3c"
                                   HorizontalOptions="Center" />
                        </VerticalStackLayout>
                    </Grid>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>